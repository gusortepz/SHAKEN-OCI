{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clules48/Documents/tec/6toSemestre/reto/oci-react-samples/MtdrSpring/backend/src/main/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/clules48/Documents/tec/6toSemestre/reto/oci-react-samples/MtdrSpring/backend/src/main/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/clules48/Documents/tec/6toSemestre/reto/oci-react-samples/MtdrSpring/backend/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var navigate=useNavigate();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();setError(null);_context.prev=2;_context.next=5;return fetch(\"/api/auth/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,password:password})});case 5:response=_context.sent;if(response.ok){_context.next=8;break;}throw new Error(\"Invalid credentials\");case 8:_context.next=10;return response.json();case 10:data=_context.sent;localStorage.setItem(\"token\",data.token);navigate(\"/\");_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](2);setError(_context.t0.message);case 18:case\"end\":return _context.stop();}},_callee,null,[[2,15]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:function onChange(e){return setUsername(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},required:true})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]})]});}export default Login;","map":{"version":3,"names":["useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","error","setError","navigate","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","response","data","wrap","_callee$","_context","prev","next","preventDefault","fetch","method","headers","body","JSON","stringify","sent","ok","Error","json","localStorage","setItem","token","t0","message","stop","_x","apply","arguments","className","children","onSubmit","type","value","onChange","e","target","required"],"sources":["/Users/clules48/Documents/tec/6toSemestre/reto/oci-react-samples/MtdrSpring/backend/src/main/frontend/src/pages/Login.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction Login() {\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [error, setError] = useState(null);\n    const navigate = useNavigate();\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        setError(null);\n\n        try {\n            const response = await fetch(\"/api/auth/login\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ username, password })\n            });\n\n            if (!response.ok) {\n                throw new Error(\"Invalid credentials\");\n            }\n            \n            const data = await response.json();\n            localStorage.setItem(\"token\", data.token);\n            navigate(\"/\");\n        } catch (err) {\n            setError(err.message);\n        }\n    };\n\n    return (\n        <div className=\"login-container\">\n            <h2>Login</h2>\n            <form onSubmit={handleSubmit}>\n                <div>\n                    <label>Username:</label>\n                    <input \n                        type=\"text\" \n                        value={username} \n                        onChange={(e) => setUsername(e.target.value)} \n                        required \n                    />\n                </div>\n                <div>\n                    <label>Password:</label>\n                    <input \n                        type=\"password\" \n                        value={password} \n                        onChange={(e) => setPassword(e.target.value)} \n                        required \n                    />\n                </div>\n                {error && <p className=\"error\">{error}</p>}\n                <button type=\"submit\">Login</button>\n            </form>\n        </div>\n    );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}